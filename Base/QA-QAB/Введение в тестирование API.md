202203161410
Tags:
___
# Что такое API
API (Application Programming Interface — программный интерфейс приложения, или интерфейс программирования приложений) — описание способов (набор классов, процедур, функций, структур или констант), которыми одна компьютерная программа может взаимодействовать с другой программой

Проще говоря, это набор компонентов, с помощью которых компьютерная программа (бот или же сайт) может взаимодействовать с другой программой (API). 

## Как работают API?
Архитектура API обычно объясняется с точки зрения клиента и сервера. Приложение, отправляющее запрос, называется клиентом, а приложение, отправляющее ответ, называется сервером. Итак, в примере с погодой база данных службы – это сервер, а мобильное приложение – это клиент. 

Существует четыре различных способа работы API в зависимости от того, когда и почему они были созданы.

### SOAP API 

SOAP – Simple Object Access Protocol, т. е. простой протокол доступа к объектам. Клиент и сервер обмениваются сообщениями посредством XML. Это менее гибкий API, который был более популярен в прошлом.
### RPC API

Такие API называются системой удаленного вызова процедур. Клиент выполняет функцию (или процедуру) на сервере, и сервер отправляет результат обратно клиенту.
### Websocket API

Websocket API – это еще одна современная разработка web API, которая использует объекты JSON для передачи данных. WebSocket API поддерживает двустороннюю связь между клиентскими приложениями и сервером. Сервер может отправлять сообщения обратного вызова подключенным клиентам, что делает его более эффективным, чем REST API.

### REST API

На сегодняшний день это самые популярные и гибкие API-интерфейсы в Интернете. Клиент отправляет запросы на сервер в виде данных. Сервер использует этот клиентский ввод для выполнения внутренних функций и возвращает выходные данные обратно клиенту. Давайте рассмотрим API REST более подробно ниже.

## Что такое REST API?





# Основные положения
[[Архитектура клиент-сервер]]
[[Что такое API]]
[[00_Классификация баз данных]]
[[Архитектура REST]]




Серверная и пользовательская часть взаимосвязаны. И могут дать хороший результат, то есть понятный и функциональный сайт/приложение, только когда работают слаженно.
Бэкенд для предоставления своих функций реализует API, который использует фронтенд.



**Что нужно тестировать на стороне [[Архитектура клиент-сервер|клиента]]?**

- верстка;
- контент (текст, изображения, анимации и т.д.);
- элементы интерфейса (меню, формы, фильтры и т.д.);
- первичные проверки/валидация при вводе данные в форму (заполненность обязательных полей, соответствие маске и т.д.);
- кроссбраузерность (в качестве клиента могут выступать различные браузеры – Safari, Google Chrome, Opera и пр.);
- юзабилити/удобство использования.

Полное тестирование бизнес-логики клиент-серверного приложения возможно только при работающем взаимодействии между клиентом и сервером (после интеграции frontend и backend). Но проводится также со стороны “клиента” через пользовательский интерфейс.

Тестирование части [[Web-приложение|веб-приложения]], размещенной на [[Веб-сервер|веб-сервере]], можно провести и минуя графический (клиентский) интерфейс, однако это требует применения дополнительных инструментов (например, [[Postman]], [[SOAP UI]]).
Помимо функционального тестирования с помощью запросов, которое будет рассматриваться ниже, к серверной части приложения также могут применяться такие виды, как [[Тестирование производительности| тестирование производительности]], [[Тестирование инсталляции (Installation testing)|инсталляции]], [[Конфигурационное тестирование|конфигурационное]] и т.д.


**На что обращать внимание при работе с запросами?**
Вникайте в отправляемые запросы и полученные от сервера ответы. Анализ запросов – это возможность обнаружить спрятавшийся дефект гораздо быстрее, чем осуществляя его поиск в интерфейсе.

1. Соответствует ли действиям пользователя вызываемая функция?
2. Правильный ли метод используется для того или иного запроса? Если вы отправляете сообщение, а на сервер уходит только GET-запрос, то что-то здесь явно не так.
3. Все ли необходимые параметры переданы в заголовке или теле запроса? Нужно учитывать как данные, непосредственно введенные пользователем через интерфейс, так и дефолтные значения или другие данные из контекста (дата/время, часовой пояс, идентификатор пользователя и т.д.).
4. Все ли необходимые данные получены в теле ответа? Соответствуют ли они данным в БД? Соответствует ли формат ответа спецификации?
5. Внимательно следите за кодами состояний. Подробнее остановимся на этом пункте ниже.
6. Время выполнения запросов.
7. Цепочки последовательных запросов. Иногда 1 действию может соответствовать не 1 запрос, а целая серия. Например, проверка возможности операции на текущий момент (достаточный баланс пользователя, наличие товара и т.д.), выполнение целевой операции (создание/изменение записи), возврат к списку записей и т.п.
8. Мониторьте трафик на предмет запросов на другие (не ваши) сервера, дублирующихся запросов, создающих лишнюю нагрузку и т.д..


**Отправка запросов**
Кроме мониторинга отправляемых запросов при работе через интерфейс, при
тестировании бывает полезным и отправлять запросы самостоятельно, минуя интерфейс пользователя.
Отправка запросов в ручную позволяет:
- Протестировать работу backend, когда frontend еще не реализован.
- Протестировать работу отдельного запроса с разными параметрами.
- Сократить время на создание тестовых данных.

**Что это даёт:**
- Возможность приступить к тестированию backend раньше.
- Возможность локализовать причину дефекта с помощью модификации запроса, отправляя его с разными параметрами.
- Возможность выполнить необходимый запрос отдельно, исключая запросы выполняющиеся с ним в цепочке.




Если вы тестируете API, то должны знать про два основных формата передачи данных:
-   **[[Что такое XML|XML]]** — используется в [[SOAP]] _(всегда)_ и [[Архитектура REST|REST-запросах]] _(реже)_;
-   **[[JSON]]** — используется в REST-запросах.
 

# Инструменты для мониторинга запросов и их отправки

Рассмотрим некоторые инструменты, которые полезны для мониторинга запросов при работе с приложением или для отправки запросов вручную:
● Инструменты разработчика в браузерах (Консоль браузера).
● [[Fiddler]].
● [[Postman]].

Однако, необходимо понимать, что это далеко не весь перечень инструментов для отслеживания трафика приложений. Функция мониторинга запросов также есть и в таких инструментах как Soap UI, Jmeter, Charles Proxy и др.



## Инструменты разработчика в браузерах – Dev tools / Консоль браузера
Присутствует во всех основных desktop-браузерах.
В большинстве браузеров открывается по нажатию F12 или через меню / контекстноеменю.
Функциональность в разных браузерах может несколько отличаться, но основные
возможности общие.


# Ссылки
___
##### Links



---
##### Источники
