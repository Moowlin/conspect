202204262010
Tags:
___
# Определение

SOAP (от англ. Simple Object Access Protocol — простой протокол доступа к объектам) — протокол обмена структурированными сообщениями в распределённой вычислительной среде. Первоначально SOAP предназначался в основном для реализации удалённого вызова процедур (RPC). Сейчас протокол используется для обмена произвольными сообщениями в формате [[Что такое XML|XML]], а не только для вызова процедур. 


SOAP является расширением протокола XML-RPC. 

SOAP может использоваться с любым протоколом прикладного уровня: [[Протокол SMTP|SMTP]], [[Протокол FTP|FTP]], [[Протокол HTTP|HTTP]], [[Протокол HTTPS|HTTPS]] и др. Однако его взаимодействие с каждым из этих протоколов имеет свои особенности, которые должны быть определены отдельно. Чаще всего SOAP используется поверх HTTP. 


# Структура протокола
![[220px-SOAP.svg.png]]

Сообщение SOAP выглядит так:

-   **Envelope** — корневой элемент, который определяет сообщение и пространство имен, использованное в документе.

-   **Header** — содержит атрибуты сообщения, например: информация о безопасности или о сетевой маршрутизации.
	В заголовке могут использоваться три атрибута, которые указывают, как принимающая сторона должна обрабатывать сообщение, — **mustUnderstand**, **actor** и **encodingStyle.** Значение **mustUnderstand** — 1 или 0 — говорит принимающему приложению о том, следует ли распознавать заголовок в обязательном или опциональном порядке. Атрибут **actor** задает конкретную конечную точку для сообщения. Атрибут **encodingStyle** устанавливает специфическую кодировку для элемента. По умолчанию SOAP-сообщение не имеет определенной кодировки.
	
-   **Body** — содержит сообщение, которым обмениваются приложения.
	Может содержать запрос к серверу или ответ от него
-   **Fault** — необязательный элемент, который предоставляет информацию об ошибках, которые произошли при обработке сообщений.
	Может содержать вложенные элементы, которые проясняют причину возникновения ошибки:
	-  faultcode — код неполадки;
	-  faultstring — «человекопонятное» описание проблемы;
	-  faultactor — информация о программном компоненте, который вызвал ошибку;
	-  detail — дополнительные сведения о месте возникновения неполадки.

# В каких случаях используют SOAP
-   Асинхронная обработка и последующий вызов. Стандарт SOAP 1.2 обеспечивает клиенту гарантированный уровень надежности и безопасности.
-   Формальное средство коммуникации. Если клиент и сервер имеют соглашение о формате обмена, то SOAP 1.2 предоставляет жесткие спецификации для такого типа взаимодействия. Пример — сайт онлайн-покупок, на котором пользователи добавляют товары в корзину перед оплатой. Предположим, что есть веб-служба, которая выполняет окончательный платеж. Может быть достигнуто соглашение, что веб-сервис будет принимать только название товара, цену за единицу и количество. Если сценарий существует, лучше использовать протокол SOAP.
-   Операции с состоянием. Если приложение требует, чтобы состояние сохранялось от одного запроса к другому, то стандарт SOAP 1.2 предоставляет структуру для поддержки таких требований.


# Ссылки
___
##### Links
[[SOAP против REST]]

---
##### Источники
https://blog.skillfactory.ru/glossary/soap-api/