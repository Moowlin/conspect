202106301504
Tags:
___
# Описание

Утилита ping может быть очень полезным диагностическим инструментом. Она поможет быстро проверить, подключены ли вы к маршрутизатору или к интернету, и дает кое-какое представление о качестве этой связи.
`ping опции адрес_узла`
В качестве адреса узла можно передавать как ip адрес, так и доменное имя.

==Опции:==
-   **-4** - использовать только ipv4 (по умолчанию);
-   **-6** - использовать только ipv6;
-   **-A** - адаптивный режим, время между отправками пакета адаптируется к времени передачи и приема пакета, но не меньше чем 200мс;
-   **-b** - разрешить ping широковещательного адреса;
-   **-с** - количество пакетов, которые нужно отправить;
-   **-D** - выводить время в виде UNIX timestamp;
-   **-f** - режим флуда, в этом режиме пакеты передаются без задержек, может использоваться для совершения DoS атак на отдельные узлы. Количество точек, которые выводит утилита обозначает количество потерянных пакетов;
-   **-i** - интервал в секундах между отправкой пакетов;
-   **-I** - использовать этот сетевой интерфейс для отправки пакетов;
-   **-l** - режим перегрузки, отправляется очень много пакетов и система не следит за ответными пакетами;
-   **-n** - не получать домены для ip адресов;
-   **-r** - игнорировать таблицы маршрутизации и отправить пакет на указанный интерфейс;
-   **-s** - размер одного пакета;
-   **-t** - установить TTL вручную;
-   **-v** - более подробный вывод.


Для каждого пакета выводится уникальный идентификатор icmp_seq, количество узлов до целевого узла ttl и время, потраченное на доставку пакета time. Чтобы остановить ping нажмите сочетание клавиш **Ctrl+C**. В конце утилита вывела общую статистику:

-   **packets transmitted** - отправлено пакетов;
-   **received** - получено пакетов;
-   **packet loss** - процент потерянных пакетов;
-   **time** - обще время работы;  
    **rtt min/avg/max/mdev** - минимальное время/среднее время/максимальное время/квадратичное отклонение.

Вы можете сразу в вызове команды ограничить количество отправляемых пакетов с помощью опции -c:
`ping -c 3 ya.ru`

`ping -a google.com` - услышите звуковой сигнал для каждого успешного пинга.


### DoS-атака с пингом, который также называется Ping of Death.
Команда ping имеет встроенную функцию для этого. Это называется `ping flooding`, и этого можно достичь с помощью `опции -f`. Вам понадобятся права sudo для запуска этой опции с нулевым интервалом.

```shell
sudo ping -f google.com 
PING google.com (108.177.122.101) 56(84) bytes of data.
…………………..^C    
--- google.com ping statistics ---
1436 packets transmitted, 1413 received, 1% packet loss, time 22837ms
rtt min/avg/max/mdev = 313.887/326.102/388.178/7.464 ms, pipe 26, ipg/ewma 15.914/323.456 ms
 ```

Когда вы запустите эту команду, вы увидите, что некоторые точки появляются и исчезают в выходных данных. Каждый ‘.’ обозначает запрос, тогда как ответом является возврат (поэтому точки исчезают).

Этот параметр проверки связи полезен при тестировании нагрузочной способности сервера.

## Нет ответа
Вы можете заметить, что некоторые хосты не отвечают на запрос ping.
Если вы прервете команду ping, вы увидите странную статистику.
```shell
ping intel.com
PING intel.com (13.91.95.74) 56(84) bytes of data. 
 ^C
--- intel.com ping statistics ---
100 packets transmitted, 0 received, 100% packet loss, time 101362m
```
Скорее всего, потому что некоторые серверы отбрасывают пакеты ICMP. Это мера безопасности, чтобы избежать ping-флудов.

### Хост назначения недоступен

Эта ошибка может возникать по одной из двух причин:
-   либо в локальной системе нет маршрута к удаленному хосту;
-   или маршрутизатор конечной точки не имеет маршрута к удаленному хосту.

Если вы видите только ошибку «целевой хост недоступен», это означает, что вашей системе не удалось найти маршрут к удаленному хосту.
С другой стороны, если вы видите ошибку в части ответа «Reply from <IP>», это означает, что пакет был отправлен за пределы вашей сети, но он не смог достичь пункта назначения.
Иногда серверы также блокируют трафик ICMP, который может показать эту ошибку.	

### Время ожидания запроса

Эта ошибка означает, что пакеты достигли удаленного сервера, но ответ не смог достичь вашей системы. Проблема может быть потеря пакетов или ошибка маршрутизации.



___
##### Links


---
##### Источники
[КОМАНДА PING В LINUX](https://losst.ru/komanda-ping-v-linux)