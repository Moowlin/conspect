202104280050
Tags:
___
### Группы в Linux
Все группы, созданные в системе, находятся в файле `/etc/group`.
Кроме стандартных root и users, здесь есть еще пару десятков групп. Это группы, созданные программами, для управления доступом этих программ к общим ресурсам. Каждая группа разрешает чтение или запись определенного файла или каталога системы, тем самым регулируя полномочия пользователя, а, следовательно, и процесса, запущенного от этого пользователя. Здесь можно считать, что пользователь - это одно и то же что процесс, потому что у процесса все полномочия пользователя, от которого он запущен.
         
`daemon` - от имени этой группы и пользователя daemon запускаются сервисы, которым необходима возможность записи файлов на диск.
`sys` - группа открывает доступ к исходникам ядра и файлам include сохраненным в системе
`sync` - позволяет выполнять команду `/bin/sync`
`games` - разрешает играм записывать свои файлы настроек и историю в определенную папку
`man` - позволяет добавлять страницы в директорию `/var/cache/man`
`lp` - позволяет использовать устройства параллельных портов
`mail` - позволяет записывать данные в почтовые ящики `/var/mail/`
`proxy` - используется прокси серверами, нет доступа записи файлов на диск
`www-data` - с этой группой запускается веб-сервер, она дает доступ на запись `/var/www`, где находятся файлы веб-документов
`list` - позволяет просматривать сообщения в `/var/mail`
`nogroup` - используется для процессов, которые не могут создавать файлов на жестком диске, а только читать, обычно применяется вместе с пользователем nobody.
`adm` - позволяет читать логи из директории /var/log
`tty` - все устройства `/dev/vca` разрешают доступ на чтение и запись пользователям из этой группы
`disk` - открывает доступ к жестким дискам `/dev/sd* /dev/hd*`, можно сказать, что это аналог рут доступа.
`dialout` - полный доступ к серийному порту
`cdrom` - доступ к CD-ROM
`wheel` - позволяет запускать утилиту sudo для повышения привилегий
`audio` - управление аудиодрайвером
`src` - полный доступ к исходникам в каталоге `/usr/src/`
`shadow` - разрешает чтение файла `/etc/shadow`
`utmp` - разрешает запись в файлы `/var/log/utmp /var/log/wtmp`
`video` - позволяет работать с видеодрайвером
`plugdev` - позволяет монтировать внешние устройства USB, CD и т д
`staff` - разрешает запись в папку `/usr/local`
           

### Управление группами Linux
При создании файла ему назначается основная группа пользователя, который его создал. Группы могут быть не только установлены системой, но и вы сами вручную можете менять группы файлов для этого есть команда chgrp:
`chgrp имя_группы имя_файла`
создать группу linux:
`sudo groupadd имя_группы`
        
Пользователь имеет основную группу, она указывается при создании, а также несколько дополнительных. 
==Основная группа отличается от обычных тем, что все файлы в домашнем каталоге пользователя имеют эту группу, и при ее смене, группа этих каталогов тоже поменяется. Также именно эту группу получают все файлы, созданные пользователем.==
Дополнительные группы нужны, чтобы мы могли разрешить пользователям доступ к разным ресурсам добавив его в эти группы в linux.

Управление группами Linux для пользователя выполняется с помощью команды `usermod`. Рассмотрим ее синтаксис и опции:
``` bash
$ usermod опции имя_пользователя
-G - дополнительные группы, в которые нужно добавить пользователя
-g изменить основную группу для пользователя
-R удалить пользователя из группы.
```

Можно добавить пользователя в группу linux временно, командой `newgrp`. Откроется новая оболочка, и в ней пользователь будет иметь нужные полномочия, но после закрытия все вернется как было:
`sudo newgrp имя_группы`

`groups` - Посмотреть группы linux, в которых состоит пользователь
`sudo usermod -R группа пользователь` - Удалить пользователя из группы 
`sudo delgroup имя_группы` -  удалить группу

### Список пользователей группы
Все группы, созданные в ОС Linux собраны в файле `/etc/group`. Синтаксис записи группы в этом файле, следующий:

`имя_группы:x:идентификатор:список_пользователей`       

`имя_группы` - имя, которое используется для управления группой и отображается в выводе команд;
`x` - заглушка для пароля;
`идентификатор` - уникальный идентификатор группы;
`список_пользователей` - все пользователи, которые входят в группу, разделённые запятой.
           
Или также можно воспользоваться регулярным выражением grep:
`cat /etc/group | grep group7`
           
### Список групп пользователя
Посмотреть список групп пользователя Linux двумя основными способами^
1. команда `id`
	`id -Gn имя\_пользователя` 
	`-G` - вывести только список идентификаторов групп текущего пользователя 
	`-n` - получить их имена
2. команда `groups`
	`groups имя_пользователя`
	`groups | wc -w` - посчитать количество групп




___
##### Links


---
##### Источники
