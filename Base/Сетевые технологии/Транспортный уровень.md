202201241408
Tags:
___
# Транспортный уровень
Средства сетевого уровня обеспечивают доставку данных между устройствами в составной сети (компьютерами, маршрутизаторами и т.д). Однако не следует забывать, что на одном узле может функционировать параллельно несколько программ, которым требуется доступ к сети. Следовательно, данные внутри компьютерной системы должны распределяться между программами. Поэтому, при передаче данных по сети недостаточно просто адресовать конкретный узел. Необходимо также идентифицировать программу-получателя, что невозможно осуществить средствами сетевого уровня.  
  
Другой серьезной проблемой протоколов сетевого уровня является отсутствие средств, позволяющих передавать большие массивы данных. Когда исходные данные превышают максимально допустимый размер пакета сетевого уровня, то эти данные должны быть разбиты на порции, каждая из которых передается в сеть отдельным пакетом. Однако каждый пакет сетевого уровня передается по сети как единый, независимый от других блок данных. В случае если какие-либо пакеты "потерялись", то модуль сетевого протокола на принимающей стороне не сможет обнаружить потерю, и, следовательно, – обнаружить нарушение целостности общего массива данных. Поэтому средства транспортного уровня обеспечивают отсутствие потерь информации. Такой режим передачи данных получил название **гарантированной доставки**.

![[Pasted image 20220124140905.png]]

## Задачи транспортного уровня (ТУ)

Средства транспортного уровня представляют собой функциональную надстройку над сетевым уровнем и решают две основных задачи:  
  
-   обеспечение доставки данных между конкретными программами, функционирующими, в общем случае, на разных узлах сети;
-   обеспечение гарантированной доставки массивов данных произвольного размера.


# Модель OSI
![[Pasted image 20220124141233.png]]

Отдельно выделяются хосты, это устройства, где работают полезные пользовательские программы. И сетевое оборудование, такое как маршрутизаторы, коммутаторы и другие сетевые устройства. На сетевом оборудовании есть только 3 уровня: физический, канальный и сетевой. Уровни начиная с транспортного работают только на хостах.
Транспортный уровень обеспечивает сквозное соединение. Между двумя взаимодействующими хостами может находиться большое количество сетевых устройств, но они не влияют на работу транспортного уровня, поэтому ТУ называется сетенезависимым. Он позволяет скрыть от разработчиков приложений детали сетевого взаимодействия.


# Адресации. Порты

Для адресации на транспортном уровне используются порты. Это просто число от 1 до 65 535. Номера у процессов на одном хосте не должны повторяться, иначе мы не сможем понять к какому конкретно процессу отправить пришедший пакет. 

Записываются порты, следующим образом **192.168.1.3**:80. Выделенные жирным это IP-адрес, а 80 — это порт. Чтобы в интернете подключиться к какому-нибудь сервису и к службе необходимо указать ip адрес и соответствующий порт.

## Типы портов

Если мы хотим подключиться к какому-нибудь сервису в интернете нам нужно знать не только ip адрес, но и порт. Поэтому договорились, что популярные сервисы будут работать на одних и тех же портах. Эти порты называются хорошо или широко известные порты 1-1024.

**Хоошо известные порты: 1-1024:
-	80 - HTTP (Web)
-	25 - SMTP
-	53 - DNS
-	67, 68 - DHCP
**Зарегистрированные порты: 1025-49151:**
- регистрация в Internet Assigned Numbers Authority (IANA)
**Динамические порты: 49151-65535:**
- Автоматически назначаются операционной системой сетевым приложениям

Если вы разрабатываете свой сервис, и хотите, чтобы пользователи знали на каком порту он работает, вы можете зарегистрировать этот порт в организации IANA и выбрать себе порт из диапазона зарегистрированные. Но нужно смотреть, чтобы этот порт не был зарегистрирован  никаким другим разработчиком приложения.

# Надежность на транспортном уровне

Важной особенностью ТУ является то, что он может обеспечить более высокую надежность, чем сеть которая используется для передачи данных. В настоящее время это эффективно на практике, потому что используются надежные каналы связи, ошибки в этих КС происходят редко. Поэтому можно строить сеть ненадежную, которая будет стоить дешево, а ошибки, так как они возникают редко, можно исправлять программно на хостах транспортного уровня. 

В модели OSI предусмотрено много различных вариантов обеспечения надежности на транспортном уровне, но на практике, чаще всего используются две возможности. 

-   Во-первых ТУ может гарантировать доставку данных. Так как сеть у нас не надежная, некоторые пакеты могут потеряться. Чтобы гарантировать доставку ТУ использует подтверждение. Если через определенное время не пришло подтверждение, то тот же самый пакет отправляется снова. 
-   Во-вторых ТУ может гарантировать порядок следования сообщений. Так как у нас сеть с пакетной коммутацией, разные пакеты могут пойти через разные маршрутизаторы. И может случиться так, что пакет, который был отправлен позже придет к получателю раньше. Чтобы решить эту проблему на ТУ используется нумерация сообщений.


# Протоколы транспортного уровня TCP/IP
В стеке протоколов tcp на ТУ используется два [[Протокол TCP|протокола TCP]] и [[Протокол UDP|UDP]]. Tcp это протокол, который обеспечивает надежность доставки. Он обеспечивает гарантию доставки и гарантию порядка следования сообщений. Протокол udp не гарантирует доставку данных, но зато работает быстрее, чем протокол tcp.


# Интерфейс транспортного уровня
Для взаимодествия с транспортным уровнем используется интерфейс [[сокет|сокетов]] 

![[Pasted image 20220124142123.png]]

# Ссылки
___
##### Links


---
##### Источники
