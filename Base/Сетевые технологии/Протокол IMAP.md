202104292149
Tags:
___

# Протокол IMAP

**IMAP** (*Internet Message Access Protocol*) -  это протокол доступа к электронной почте.

IMAP (протокол прикладного уровня для доступа к электронной почте), также как и POP3 используется для получения сообщений электронной почты на локальный клиент, однако, он имеет существенное отличие — загружаются только лишь заголовки электронных сообщений, сам текст письма остается на сервере.

Порты IMAP, по умолчанию являются такими:
- Порт 143 — порт без шифрования
- Порт 993 — порт SSL/TLS, также известный как **IMAPS**

**Преимущества:**
- с почтовым ящиком может одновременно работать несколько клиентов
- может выполнять с письмами вполне сложные действия, например выполнять поиск писем по заданному шаблону
- позволяет использовать несколько почтовых ящиков (mailbox) или по-русски папки
- использование флагов. Именно благодаря флагам, протокол IMAP позволяет узнать прочитанное это сообщение или нет, а также много другой полезной информации
> Флаги в IMAP бывают двух типов: Системные и Пользовательские.
>Системные флаги и их назначения заданы в стандарте IMAP и они начинаются с обратного слеша (\\).
> -   \\Seen –  означает, что сообщение было просмотрено.
> -   \\Answered – на сообщение был отправлен ответ
> -   \\Flagged – у сообщения повышенная важность или на него нужно ответь, как можно быстрее
> -   \\Draft – письмо не закончено и является черновиком
> -   \\Deleted – используется для пометки сообщения на удаление
> -   \\Recent – сообщение новое, при предыдущих подключениях клиента того сообщения не было.
> 
> Также могут создаваться Пользовательские флаги. Они не могут начинаться с символа \\.

## Состояния сеанса IMAP
При работе по протоколу IMAP клиент проходит через четыре состояния.

1.  Клиент не аутентифицирован (*Not Authenticated*) – клиент только что подключился к серверу IMAP и ему необходимо ввести свой логин и пароль, либо пройти аутентификацию каким-либо другим способом.
2.  Клиент аутентифицирован (*Authenticated*) – это означает, что клиент прошел успешную аутентификацию, подтвердил что он именно тот, за кого себя выдает, но пока не выбрал папку с которой он будет работать. При выборе папки происходит переход в следующее состояние.
3.  Папка выбрана (*Selected*) – после этого можно читать сообщения, которое находится в этой папке, и выполнять с ними требуемые действия.
4.  Выход (*Logout*) – разрыв соединения.

> - Протокол IMAP, также как и другие почтовые протоколы работают в текстовом режиме и использует взаимодействие запрос-ответ. Однако существенным отличием является то, что IMAP позволяет выполнять одновременно несколько команд.
> - Клиент может не дожидаться выполнения текущей команды, а запустить другую команду.
> - Для того чтобы отличать разные команды и ответы на них, в протоколе IMAP используются идентификаторы или теги команд. Это просто алфавитно-цифровая строка (А0001,А0002). Каждая команда клиента должна начинаться с тега. Сервер включает этот тег в ответ на команду, для того чтобы можно было определить к какой именно команде этот ответ относится.

## Ответы IMAP
Ответ IMAP также как и других почтовых протоколов состоит из двух частей: Статус и Поясняющее сообщение.

В Статусе в ответов IMAP всего лишь три:

-   OK- означает, что команда выполнена успешна;
-   NO – при выполнении команды произошла ошибка;
-   BAD —  означает, что клиент запустил неправильную команду или указал неправильные или недостаточные аргументы.


==Пример сеанса смотри в источниках==



# Ссылки
___
##### Links
[[Электронная почта]]

---
##### Источники
[Видеолекция по протоколу электронной почты IMAP](https://www.youtube.com/watch?v=VGYHXIdtNS4)
[# Internet Message Access Protocol (imap) — протокол доступа к почте](https://zvondozvon.ru/tehnologii/protokoli/imap)