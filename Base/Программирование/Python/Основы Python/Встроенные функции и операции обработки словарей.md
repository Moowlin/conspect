202105212055
Tags:
___
Встроенная функция [[len()]] возвращает количество элементов в заданном словаре.
```python
Months = { 1:'Jan', 2:'Feb', 3:'Mar', 4:'Apr',
           5:'May', 6:'Jun', 7:'Jul', 8:'Aug',
           9:'Sep', 10:'Oct', 11:'Nov', 12:'Dec' }
count = len(Months) 	# count = 12
```
___
Доступ к элементу словаря по его ключу D[key]
`item = D[key]`
-   **D** – заданный словарь;
-   key – ключ, на основе которого осуществляется поиск элемента item в словаре. Если ключа key нету в словаре, то генерируется исключение KeyError;
-   item – элемент, который получается по ключу key.
___
Если в словарь нужно записать или добавить значение item по ключу key, то операция [] имеет следующую форму использования
`D[key] = item`

Во время записи возможны два случая:
-   ключ key присутсвует в словаре. В этом случае значение item заменяет предыдущее значение;
-   ключа key нету в словаре. В этом случае к словарю добавляется новая пара key:item.
___
[[Операторы для работы с последовательностями]]
___
####  Встроенная функция [[list()]]. Пример применения со словарями
Использование встроенной функции `list() `позволяет получать списки значений, ключей и пар (**ключ:значение**). Чтобы сформировать соответствующий список с помощью list() нужно использовать один из следующих методов:

-   метод `values()` позволяет получить список значений словаря;
-   метод `keys()`позволяет получить список ключей словаря;
-   метод `items()`позволяет получить список пар (ключ:значение).
```python
# Исходный словарь
Figures = { 1:'Rectangle', 2:'Triangle', 3:'Circle'}

# 1. Получить список значений словаря
values = list(Figures.values())
print(values) # ['Rectangle', 'Triangle', 'Circle']

# 2. Получить список ключей словаря
keys = list(Figures.keys()) # keys = [1, 2, 3, 4]
print(keys)

# 3. Получить список пар (ключ:значение)
pairs = list(Figures.items())
print(pairs) # [(1,'Rectangle'),(2,'Triangle'),(3,'Circle')]
```
___
#### Встроенная функция [[zip()]].
Функция `zip()` позволяет создать словарь путем объединения списков ключей и значений.
```python
# Создание словаря из списков ключей и значений
Numbers = dict(zip([1, 2, 3], ['One', 'Two', 'Three']))
print(Numbers) # {1: 'One', 2: 'Two', 3: 'Three'}
```
___
#### Обход словаря с помощью [[Цикл for]]
```python
# Исходный словарь
Months = { 1:'Jan', 2:'Feb', 3:'Mar',
           4:'Apr', 5:'May', 6:'Jun',
           7:'Jul', 8:'Aug', 9:'Sep',
           10:'Oct', 11:'Nov', 12:'Dec' }

# Цикл for обхода словаря
# в цикле mn - ключ, Months[mn] - значение
for mn in Months:
    print(mn, ': ', Month\[mn])
```
___
#### Использование словарей для разреженных структур данных.
Словари могут эффективно использоваться для представления разреженных структур данных. Примерами таких данных могут быть двумерные массивы, в которых только несколько элементов имеют определенные значения.

**Пример.** В примере продемонстрировано представление разреженной матрицы чисел в виде словаря. Пусть задана матрица
![[11_01_02_01_04_04_01_.jpg]]
которую нужно представить в виде словаря. Решение задачи следующее:
```python
# Матрица M
M = {} # создать пустой словарь
M[(0, 1)] = 1 # ключ=(0,1): значение=1
M[(1, 2)] = 3 # пара (ключ:значение) = ((1,2):3)
M[(2, 0)] = 2 # пара (ключ:значение) = ((2,0):2)

print(M) # {(0, 1): 1, (1, 2): 3, (2, 0): 2}
```
*В вышеприведенном примере ключами словаря являются кортежи, которые содержат координаты непустых элементов. Так, значение ключа (2, 0) означает строку 2, столбец 0.*
___
#### Создание словарей с помощью генераторов словарей.
Словари можно создавать с использованием генераторов словарей. В этом случае используется один из нижеследующих способов:

-   сгенерировать словарь на основе заданного выражения;
-   сгенерировать словарь на основе итерированного объекта;
-   инициализировать словарь из списков ключей;
-   сгенерировать словарь с использованием функции zip().
```python
# 1. Сгенерировать словарь на основе заданного выражения
# Генерируются пары (ключ: значение) = (i: 5*i)
A = { i: i*5 for i in [10,20,30,40] }
print(A) # {10: 50, 20: 100, 30: 150, 40: 200}

# 2. Сгенерировать словарь по итерируемому объекту (строке)
s = 'Hello'
B = { sym: sym*3 for sym in s } # пара (sym:sym*3)
print(B) # {'H': 'HHH', 'e': 'eee', 'l': 'lll', 'o': 'ooo'}

numbers = [ 15, 25, 30 ]
C = { num: str(num) for num in numbers }
print(C) # {15: '15', 25: '25', 30: '30'}

# 3. Инициализация словаря из списка ключей
# Заполнить список ключей значением, введенным с клавиатуры
value = int(input('Input value: '))
listKeys = [ 1, 2, 3, 4 ]
D = { lk:value for lk in listKeys }
print(D)

# Заполнить список ключей значением None
value = None
listKeys = [ 'a', 'b', 'c' ]
E = { lk:value for lk in listKeys }
print(E) # {'a': None, 'b': None, 'c': None}

# 4. Сгенерировать словарь с использованием функции zip()
WMonths = [ 'Dec', 'Jan', 'Feb']
NumMonths = [ 12, 1, 2 ]
F = { nm:wm for (nm,wm) in zip(NumMonths,WMonths) }
print(F) # {12: 'Dec', 1: 'Jan', 2: 'Feb'}
```
___
#### Сортировка словаря.
https://pythoner.name/sortdict
Ключи в словаре сохраняются в произвольном порядке. Если возникает необходимость отсортировать словарь по ключам, то для этого можно использовать метод `sort()`, который используется для списков. Для этого предварительно нужно конвертировать представление ключей в список.
```python
d = {'a': 10, 'c': 4, 'b': 15,}
list_keys = list(d.keys())
list_keys.sort()
for i in list_keys:
    print(i, ':', d[i])
```

## Операции со словарями 
### Добавление элемента
Также можно создать пустой словарь и добавлять в него элементы по одному, эффект будет тот же:

```python
phonebook = {}
phonebook["Andrey"] = '+79754297401'
```

### Изменение записи

Изменить запись можно, присвоив новое значение уже существующему ключу:

```python
phonebook["Andrey"] = '+79757647210'
```

### Извлечение элемента

Получить значение можно двумя способами. Первый -- запросить значение по ключу через квадратные скобки:

```python
>>> phonebook["Andrey"]
+79757647210
```

этот способ пишется покороче, но его недостаток в том, что в словаре может не быть ключа, который вы ищете. В этом случае программа остановится с ошибкой:

```python
>>> phonebook["Maria"]
KeyError: 'Maria'
```

Поэтому в этом случае обращение по ключу пишут с условием: 

```
if "Maria" in phonebook:
    print(phonebook["Maria"])
```

Если писать условия, проверяющие наличие ключа в словаре неудобно, то получить значение по ключу можно еще с помощью метода `get()`. Если элемента с ключом `Maria` нет в словаре, то возвращается значение `None`. Если None как значение по умолчанию не устраивает, то можно выбрать любое другое вот таким способом:

```
>>> phonebook.get("Maria")
>>> phonebook.get("Maria", "такого контакта в книге нет")
'такого контакта в книге нет'
```

### Удаление элемента

Та же проблема есть с удалением элементов из словаря. Можно использовать ключевое слово `del`:

```python
>>> del phonebook["Maria"]
>>> phonebook["Maria"]
KeyError: 'Maria'
```

Но если такого ключа в словаре нет, то эта операция возбуждает исключение `KeyError`. Поэтому в словари добавили еще один способ удалить элемент из словаря: метод `pop()`. Если `pop()` получает второй параметр, то он возвращает его значение, если искомого ключа в словаре не найдется. Это позволяет безопасно удалять элементы из словаря:

```python
>>> phonebook.pop("Maria", None)
>>> phonebook.pop("Maria", "не получилось удалить")
'не получилось удалить'
```

Удалить весь словарь можно также с помощью оператора `del`:

```python
>>> del phonebook
>>> phonebook
NameError: name 'phonebook' is not defined
```

### Вхождение элемента

Проверить принадлежность элемента словарю можно операциями `in` и `not in`:

```python
>>> "Maria" not in phonebook  
True
```

### Длина словаря
Здесь тоже никаких новостей:
```python
>>> len(phonebook)
3
```

вернет количество пар ключ-значение в словаре.

___
##### Links
###### [[dict]]


---
##### Источники
